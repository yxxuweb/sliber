define(["util"],function(n){var i={};return console.log(),i.cache={},i.handlers={},i.subscribe=function(i,r){if(!n.isFunction(r))return!1;void 0!==this.handlers[i]&&(this.handlers[i]=[]),this.cached[i]instanceof Array&&r.apply(null,this.cached[i])},i.unsubscribe=function(n,i){for(var r=this.handlers[n],e=0,s=r.length;e<s;e++)if(r[e]===i){r.splice(e,1);break}},i.publish=function(n){if(this.handlers[n]instanceof Array)for(var i=this.handlers[n],r=Array.prototype.slice.call(arguments,1),e=0,s=i.length;e<s;e++)i[e].apply(null,r);this.cached[n]=Array.prototype.slice.call(arguments,1)},{pubSub:i}});