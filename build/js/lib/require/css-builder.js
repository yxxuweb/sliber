define(["require","./normalize"],function(e,r){function t(e){if("none"==d.optimizeCss)return e;if("undefined"!=typeof process&&process.versions&&process.versions.node&&require.nodeRequire){try{var r=require.nodeRequire("csso")}catch(r){return console.log('Compression module not installed. Use "npm install csso -g" to enable.'),e}var t=e.length;try{if("function"==typeof r.minify){var s=r.minify(e);"string"==typeof s?e=s:"object"==typeof s&&(e=s.css)}else e=r.justDoIt(e)}catch(r){return console.log("Compression failed due to a CSS syntax error."),e}return console.log("Compressed CSS output to "+Math.round(e.length/t*100)+"%."),e}return console.log("Compression not supported outside of nodejs environments."),e}function s(e){if("undefined"!=typeof process&&process.versions&&process.versions.node&&require.nodeRequire){var r=require.nodeRequire("fs"),t=r.readFileSync(e,"utf8");return 0===t.indexOf("\ufeff")?t.substring(1):t}var s,n,t=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(t),"utf-8"));try{for(s=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),s.append(n);null!==(n=a.readLine());)s.append(i).append(n);return String(s.toString())}finally{a.close()}}function n(e,r){if("undefined"!=typeof process&&process.versions&&process.versions.node&&require.nodeRequire){require.nodeRequire("fs").writeFileSync(e,r,"utf8")}else{var t=new java.lang.String(r),s=new java.io.BufferedWriter(new java.io.OutputStreamWriter(new java.io.FileOutputStream(e),"utf-8"));try{s.write(t,0,t.length()),s.flush()}finally{s.close()}}}function i(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var a,o={},l=!!process.platform.match(/^win/),u=/^([^\:\/]+:\/)?\//,c=e.toUrl("base_url").split("/");c[c.length-1]="";var d,f=c.join("/"),p=!0,g=[],S={};return o.load=function(e,t,n,i){if(d=d||i,a||(a=path.resolve(d.dir||path.dirname(d.out.toString()),d.siteRoot||".")+"/",l&&(a=a.replace(/\\/g,"/"))),e.match(u))return n();var o=t.toUrl(e+".css");l&&(o=o.replace(/\\/g,"/"));var c=o;if(c.indexOf(f)<0){var p=t.toUrl(d.appDir);l&&(p=p.replace(/\\/g,"/")),0==c.indexOf(p)&&(c=a+c.substring(p.length))}S[e]=r(s(o),c,a),n()},o.normalize=function(e,r){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),r(e)},o.write=function(e,r,s,n){var a;if(!r.match(u)&&(g.push(S[r]),global._requirejsCssData?global._requirejsCssData.usedBy.css=!0:global._requirejsCssData={usedBy:{css:!0},css:""},0!=d.buildCSS)){var o=S[r];d.writeCSSModule&&o?(p&&(p=!1,s("define('@writecss', function() {return function writeCss(c) {var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));};});")),a='define(["@writecss"], function(writeCss){\n writeCss("'+i(t(o))+'");\n})'):a="define(function(){})",s.asModule(e+"!"+r,a)}},o.onLayerEnd=function(e,r){if(d.separateCSS&&d.IESelectorLimit)throw"RequireCSS: separateCSS option is not compatible with ensuring the IE selector limit";if(d.separateCSS){var s=r.path.replace(/(\.js)?$/,".css");console.log("Writing CSS! file: "+s+"\n");var a=g.join("");process.nextTick(function(){global._requirejsCssData&&(a=global._requirejsCssData.css=a+global._requirejsCssData.css,delete global._requirejsCssData.usedBy.css,0===Object.keys(global._requirejsCssData.usedBy).length&&delete global._requirejsCssData),n(s,t(a))})}else if(0!=d.buildCSS&&1!=d.writeCSSModule)for(var o=d.IESelectorLimit?g:[g.join("")],l=0;l<o.length;l++){if(""==o[l])return;e("(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('"+i(t(o[l]))+"');\n")}g=[],p=!0},o});