define([],function(){function t(t){return e(t).split("/").reduce(function(t,r,s){return 0===t.length||".."!==r?t.push(r):t.pop(),t},[]).join("/")}function r(r,n,i){if(n=t(n),i=t(i),r.match(o)||r.match(a))return r;r=t(r);var e=i.match(a),c=n.match(a);return!c||e&&e[1]==c[1]&&e[2]==c[2]?u(s(r,n),i):s(r,n)}function s(t,r){if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(o)||t.match(a))return t;var s=r.split("/"),u=t.split("/");for(s.pop();curPart=u.shift();)".."==curPart?s.pop():s.push(curPart);return s.join("/")}function u(t,r){var s=r.split("/");for(s.pop(),r=s.join("/")+"/",i=0;r.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=r.substr(i,1);)i--;r=r.substr(i+1),t=t.substr(i+1),s=r.split("/");var u=t.split("/");for(out="";s.shift();)out+="../";for(;curPart=u.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,e=function(t){return t.replace(n,"$1/")},a=/[^\:\/]*:\/\/([^\/])*/,o=/^(\/|data:)/,c=function(t,s,u){for(var n,i,t,e=/@import\s*((?:"([^"]*)")|(?:'([^']*)'))|url\s*\(\s*(\s*(?:"([^"]*)")|(?:'([^']*)')|[^\)]*\s*)\s*\)/gi;n=e.exec(t);){i=n[3]||n[2]||n[5]||n[6]||n[4];var a;a=r(i,s,u);var o=n[5]||n[6]?1:0;t=t.substr(0,e.lastIndex-i.length-o-1)+a+t.substr(e.lastIndex-o-1),e.lastIndex=e.lastIndex+(a.length-i.length)}return t};return c.convertURIBase=r,c.absoluteURI=s,c.relativeURI=u,c});